# preProcess year 3# ==== 0 ====library(caret)# rm(list=ls())# data  load("dataY3.rda")  data0 = dataY3[, c(2:15,18:118,121:128)]  ncol(data0)  sum(names(data0) == make.names(names(data0), unique = TRUE, allow_ = FALSE))  rm(dataY3)# pca  if (length(nzv0)>0){Xnzv = X[,-nzv0]} else {Xnzv=X}  colnames(Xnzv)# preprocess  PCA = predict(prePCA0,  Xnzv)  Range = predict(preRange0,  PCA)  summary(Range)# formula  f = formula( ~ .*.)  dv = dummyVars(f, Range)  dvf = predict(dv, newdata = Range)  colnames(dvf) = make.names(colnames(dvf), unique = TRUE, allow_ = FALSE)  colnames(dvf)# preprocess, again!  if (length(nzv20)>0){Xnzv2 = dvf[,-nzv20]} else {Xnzv2=dvf}  colnames(Xnzv2)  PCA2 = predict(prePCA20,  Xnzv2)  Range2 = predict(preRange20,  PCA2)  summary(Range2)# data sets  Xy = as.data.frame(Range2) # as.data.frame(df)  Xy$y = y  str(Xy)  save(Xy, file="Xy03.rda")# ===== 1 =====library(caret)# rm(list=ls())# data  load("dataY3.rda")  data1 = dataY3[, c(2:1,18:118,121:128)]  ncol(data1)  sum(names(data1) == make.names(names(data1), unique = TRUE, allow_ = FALSE))  rm(dataY3)# Factor DaysInHospital  data1 = data1[data1$DaysInHospital>0,]  data1$someDays = factor(data1$DaysInHospital,                          labels=paste("d", 1:15, sep=""),                          ordered = TRUE  )  table(data1$someDays)  y = data1$someDays  X = data1[, 2:(ncol(data1)-1)] # remove DaysInHospital and someDays  rm(data1)# pca  if (length(nzv1)>0){Xnzv = X[,-nzv1]} else {Xnzv=X}  colnames(Xnzv)# preprocess  PCA = predict(prePCA1,  Xnzv)  Range = predict(preRange1,  PCA)  summary(Range)# formula  f = formula( ~ .*.)  dv = dummyVars(f, Range)  dvf = predict(dv, newdata = Range)  colnames(dvf) = make.names(colnames(dvf), unique = TRUE, allow_ = FALSE)  colnames(dvf)# preprocess, again!  if (length(nzv21)>0){Xnzv2 = dvf[,-nzv21]} else {Xnzv2=dvf}  colnames(Xnzv2)  PCA2 = predict(prePCA21,  Xnzv2)  Range2 = predict(preRange21,  PCA2)  summary(Range2)# data sets  Xy = as.data.frame(Range2) # as.data.frame(df)  Xy$y = y  str(Xy)  save(Xy, file="Xy13.rda")# ===== 15 ====library(caret)# rm(list=ls())# data  load("dataY3.rda")  data15 = dataY3[, c(2:15,18:118,121:128)]  ncol(data15)  sum(names(data15) == make.names(names(data15), unique = TRUE, allow_ = FALSE))  rm(dataY3)# Factor DaysInHospital  data15$someDays = factor(data15$DaysInHospital,                           labels=paste("d", 0:15, sep=""),                           ordered = TRUE  )  table(data15$someDays)  y = data15$someDays  X = data15[, 2:(ncol(data15)-1)] # remove DaysInHospital and someDays  rm(data15)# pca  if (length(nzv15)>0){Xnzv = X[,-nzv15]} else {Xnzv=X}  colnames(Xnzv)# preprocess  PCA = predict(prePCA15,  Xnzv)  Range = predict(preRange15,  PCA)  summary(Range)# formula  f = formula( ~ .*.)  dv = dummyVars(f, Range)  dvf = predict(dv, newdata = Range)  colnames(dvf) = make.names(colnames(dvf), unique = TRUE, allow_ = FALSE)  colnames(dvf)# preprocess, again!  if (length(nzv215)>0){Xnzv2 = dvf[,-nzv215]} else {Xnzv2=dvf}  colnames(Xnzv2)  PCA2 = predict(prePCA2151,  Xnzv2)  Range2 = predict(preRange25,  PCA2)  summary(Range2)# data sets  Xy = as.data.frame(Range2) # as.data.frame(df)  Xy$y = y  str(Xy)  save(Xy, file="Xy153.rda")